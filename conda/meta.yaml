{% set major = load_file_regex(load_file='CMakeLists.txt', regex_pattern='(?<=set\(ISMRMRD_VERSION_MAJOR )([^\)]+)') %}
{% set minor = load_file_regex(load_file='CMakeLists.txt', regex_pattern='(?<=set\(ISMRMRD_VERSION_MINOR )([^\)]+)') %}
{% set patch = load_file_regex(load_file='CMakeLists.txt', regex_pattern='(?<=set\(ISMRMRD_VERSION_PATCH )([^\)]+)') %}

package:
  name: ismrmrd
  version: {{ major.group(1) }}.{{ minor.group(1) }}.{{ patch.group(1) }}

source:
  path: ../

build:
  number: 0

requirements:
  build:
    - boost
    - clang>=13.0.1        # [osx]
    - clangxx>=13.0.1      # [osx]
    - cmake>=4.2.0
    - fftw=3.3.*
    - gcc_linux-64>=15.0.0  # [linux64]
    - gxx_linux-64>=15.0.0  # [linux64]
    - git
    - hdf5=1.14.*
    - ninja=1.13.*
    - pugixml=1.15
  run:
    - boost {{ boost }}
    - hdf5=1.14.*
    - fftw=3.3.*
    - pugixml=1.15

test:
  requires:
    - numpy
    - h5py
    - pytest

about:
  home: https://github.com/ismrmrd/ismrmrd
  license: MIT
  summary: 'ISMRM Raw Data Format (ISMRMRD)'
  description: |
    Libraries and tools for working with data in the ISMRM Raw Data (ISMRMRD or MRD).
  dev_url: https://github.com/ismrmrd/ismrmrd
  doc_url: https://github.com/ismrmrd/ismrmrd
  doc_source_url: https://github.com/ismrmrd/ismrmrd/blob/master/README.md
